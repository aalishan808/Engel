(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{797:(e,s,a)=>{"use strict";a.d(s,{default:()=>P});var l=a(5155),r=a(2115),t=a(5920),i=a(4662),c=a(2398),d=a(5657),o=a(2924),n=a(4817),m=a(5989),u=a(7215),x=a(7668),p=a(12),h=a(2177),g=a(221),b=a(8309);let j=b.Ik({name:b.Yj().min(1,"Name is required"),description:b.Yj().min(1,"Description is required"),price:b.ai().min(0,"Price must be 0 or more"),stock:b.ai().min(0,"Stock must be 0 or more"),category:b.Yj().min(1,"Category is required"),imageUrl:b.Yj().url("Image URL must be valid")});var f=a(6766);let v=[{label:"Electronics",value:"Electronics"},{label:"Books",value:"Books"},{label:"Clothing",value:"Clothing"}],N=[{label:"In Stock",value:"In Stock"},{label:"Out of Stock",value:"Out of Stock"},{label:"Limited",value:"Limited"}];function y(e){let{visible:s,onHide:a,onSubmit:t,defaultValues:i,loading:b=!1}=e,y=(0,r.useRef)(null),k=(0,r.useRef)(null),[w,S]=(0,r.useState)(null),[C,I]=(0,r.useState)(0),[U,P]=(0,r.useState)(!1),{register:E,control:F,handleSubmit:D,reset:V,setValue:R,formState:{errors:L,isSubmitting:Y,isDirty:$}}=(0,h.mN)({resolver:(0,g.u)(j),defaultValues:{name:"",description:"",price:0,stock:0,category:"",imageUrl:"",...i}});(0,r.useEffect)(()=>{s&&(V({name:"",description:"",price:0,stock:0,category:"",imageUrl:"",...i}),(null==i?void 0:i.imageUrl)?S(i.imageUrl):S(null))},[i,V,s]);let _=async e=>{P(!0),I(0);try{let s=e.files[0];if(!s)throw Error("No file selected");if(!s.type.startsWith("image/"))throw Error("Please upload an image file");let a=setInterval(()=>{I(e=>Math.min(e+10,90))},200),l=new FileReader;l.onload=e=>{var s;clearInterval(a),I(100);let l=null==(s=e.target)?void 0:s.result;S(l),R("imageUrl",l,{shouldDirty:!0}),setTimeout(()=>{var e;P(!1),I(0),null==(e=y.current)||e.show({severity:"success",summary:"Success",detail:"Image uploaded successfully",life:3e3})},500)},l.onerror=()=>{throw clearInterval(a),Error("Failed to read file")},l.readAsDataURL(s)}catch(e){var s;P(!1),I(0),null==(s=y.current)||s.show({severity:"error",summary:"Error",detail:e instanceof Error?e.message:"Failed to upload image",life:3e3}),k.current&&k.current.clear()}finally{e.options.clear()}},A=e=>{t(e),V(),S(null)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.y,{ref:y,position:"top-right"}),(0,l.jsx)(d.l,{header:()=>(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:i?"Edit Product":"Add New Product"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:i?"Update product details":"Fill in the form to add a new product"})]})}),footer:()=>(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)(c.$,{label:"Cancel",icon:"pi pi-times",onClick:a,className:"p-button-text border border-gray-300 hover:bg-gray-50",disabled:Y||b,severity:"secondary"}),(0,l.jsx)(c.$,{label:i?"Update Product":"Create Product",icon:"pi pi-check",type:"submit",onClick:D(A),loading:Y||b,className:"shadow-md hover:shadow-lg transition-shadow",severity:"success"})]}),visible:s,onHide:a,modal:!0,dismissableMask:!0,style:{width:"750px"},breakpoints:{"960px":"75vw","640px":"90vw"},className:"product-form-modal",contentClassName:"p-0",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("form",{className:"p-fluid space-y-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Basic Information"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Name ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)(o.S,{id:"name",...E("name"),className:"w-full ".concat(L.name?"p-invalid border-red-300":"border-gray-300"),placeholder:"Enter product name"}),L.name&&(0,l.jsx)("small",{className:"p-error block mt-2 text-red-500 text-sm",children:L.name.message})]}),(0,l.jsxs)("div",{className:"field mt-4",children:[(0,l.jsxs)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)(h.xI,{name:"category",control:F,render:e=>{let{field:s}=e;return(0,l.jsx)(m.m,{id:"category",value:s.value,options:v,onChange:e=>s.onChange(e.value),placeholder:"Select Category",className:"w-full ".concat(L.category?"p-invalid border-red-300":"border-gray-300")})}}),L.category&&(0,l.jsx)("small",{className:"p-error block mt-2 text-red-500 text-sm",children:L.category.message})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,l.jsxs)("div",{className:"field",children:[(0,l.jsxs)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:["Price ($) ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)(h.xI,{name:"price",control:F,render:e=>{let{field:s}=e;return(0,l.jsx)(n.Y,{id:"price",inputRef:s.ref,value:s.value,onValueChange:e=>s.onChange(e.value),mode:"currency",currency:"USD",locale:"en-US",className:"w-full ".concat(L.price?"p-invalid border-red-300":"border-gray-300"),placeholder:"0.00",min:0})}}),L.price&&(0,l.jsx)("small",{className:"p-error block mt-2 text-red-500 text-sm",children:L.price.message})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsxs)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700 mb-2",children:["Stock ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)(h.xI,{name:"stock",control:F,render:e=>{let{field:s}=e;return(0,l.jsx)(n.Y,{id:"stock",inputRef:s.ref,value:s.value,onValueChange:e=>s.onChange(e.value),className:"w-full ".concat(L.stock?"p-invalid border-red-300":"border-gray-300"),placeholder:"0",min:0})}}),L.stock&&(0,l.jsx)("small",{className:"p-error block mt-2 text-red-500 text-sm",children:L.stock.message})]})]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-purple-800 mb-3",children:"Description"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsxs)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Description ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)(h.xI,{name:"description",control:F,render:e=>{let{field:s}=e;return(0,l.jsx)(x.Z,{id:"description",...s,rows:5,className:"w-full ".concat(L.description?"p-invalid border-red-300":"border-gray-300"),placeholder:"Detailed product description..."})}}),L.description&&(0,l.jsx)("small",{className:"p-error block mt-2 text-red-500 text-sm",children:L.description.message})]})]})]}),(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"Product Image"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Main Image ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(u.e,{ref:k,mode:"basic",name:"productImage",accept:"image/*",maxFileSize:1e6,customUpload:!0,chooseLabel:"Upload Photo",uploadHandler:_,className:"".concat(L.imageUrl?"p-invalid":""),disabled:U})}),w&&(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded overflow-hidden border border-gray-200",children:(0,l.jsx)(f.default,{src:w,alt:"Preview",width:40,height:40,className:"object-cover"})}),(0,l.jsx)(c.$,{icon:"pi pi-times",className:"p-button-rounded p-button-danger p-button-sm absolute -top-2 -right-2",onClick:()=>{S(null),R("imageUrl","",{shouldDirty:!0}),k.current&&k.current.clear()},type:"button","aria-label":"Remove image",disabled:U})]})]}),U&&(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("div",{className:"h-1 w-full bg-gray-200 rounded",children:(0,l.jsx)("div",{className:"h-full bg-blue-500 rounded",style:{width:"".concat(C,"%")}})}),(0,l.jsxs)("small",{className:"text-xs text-gray-500",children:["Uploading: ",C,"%"]})]}),L.imageUrl&&(0,l.jsx)("small",{className:"p-error block mt-2 text-red-500 text-sm",children:L.imageUrl.message})]})]}),(0,l.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-orange-800 mb-3",children:"Inventory Status"}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Availability Status"}),(0,l.jsx)(h.xI,{name:"stock",control:F,render:e=>{let{field:s}=e;return(0,l.jsx)(m.m,{id:"status",value:s.value,options:N,onChange:e=>s.onChange(e.value),placeholder:"Select Status",className:"w-full border-gray-300"})}})]})]})]})]})}),$&&(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mt-6 flex items-start gap-3",children:[(0,l.jsx)("i",{className:"pi pi-info-circle text-blue-500 mt-0.5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Unsaved Changes"}),(0,l.jsx)("p",{className:"text-sm text-blue-600",children:"You have unsaved changes. Make sure to save before leaving this page."})]})]})]})})]})}var k=a(5317),w=a(3915),S=a(5404),C=a(7505);let I=0===(0,w.Dk)().length?(0,w.Wp)({apiKey:"AIzaSyCFF7cfc3bMxs7_vZ0bnMRoR7uJyOiEGNo",authDomain:"enjel-15e1b.firebaseapp.com",projectId:"enjel-15e1b",storageBucket:"enjel-15e1b.firebasestorage.app",messagingSenderId:"519013623216",appId:"1:519013623216:web:d7a75a0ab0bf34fe88e275"}):(0,w.Sx)();(0,S.xI)(I);let U=(0,k.aU)(I);function P(){let[e,s]=(0,r.useState)([]),[a,d]=(0,r.useState)(null),[o,n]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),x=async()=>{s((await (0,k.GG)((0,k.rJ)(U,"products"))).docs.map(e=>{let s=e.data();return{id:e.id,name:s.name,description:s.description,price:s.price,stock:s.stock,category:s.category,imageUrl:s.imageUrl}}))};(0,r.useEffect)(()=>{x()},[]);let p=async e=>{m?await (0,k.mZ)((0,k.H9)(U,"products",m),e):await (0,k.gS)((0,k.rJ)(U,"products"),e),n(!1),u(null),x()},h=async e=>{await (0,k.kd)((0,k.H9)(U,"products",e)),x()};return(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold",children:"Product List"}),(0,l.jsx)(c.$,{label:"Add Product",icon:"pi pi-plus",onClick:()=>{d(null),n(!0)}})]}),(0,l.jsxs)(t.b,{value:e,paginator:!0,rows:5,rowsPerPageOptions:[5,10,25],filterDisplay:"row",responsiveLayout:"scroll",children:[(0,l.jsx)(i.V,{field:"name",header:"Name",filter:!0,filterPlaceholder:"Search by name"}),(0,l.jsx)(i.V,{field:"description",header:"Description",filter:!0,filterPlaceholder:"Search by description"}),(0,l.jsx)(i.V,{field:"price",header:"Price"}),(0,l.jsx)(i.V,{field:"stock",header:"Stock"}),(0,l.jsx)(i.V,{field:"category",header:"Category"}),(0,l.jsx)(i.V,{header:"Image",body:e=>(0,l.jsx)(f.default,{src:e.imageUrl,alt:e.name,width:60,height:60})}),(0,l.jsx)(i.V,{header:"Actions",body:e=>(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(c.$,{icon:"pi pi-pencil",rounded:!0,onClick:()=>{d(e),u(e.id),n(!0)}}),(0,l.jsx)(c.$,{icon:"pi pi-trash",severity:"danger",rounded:!0,onClick:()=>h(e.id)})]})})]}),(0,l.jsx)(y,{visible:o,onHide:()=>n(!1),onSubmit:p,defaultValues:a||void 0})]})}(0,C.c7)(I)},1806:(e,s,a)=>{Promise.resolve().then(a.bind(a,797))}},e=>{e.O(0,[657,135,965,786,441,964,358],()=>e(e.s=1806)),_N_E=e.O()}]);